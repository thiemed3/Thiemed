<?xml version="1.0" encoding="utf-8"?>
<odoo noupdate="1">
    <!--ACCIONES MANUALES DESDE LISTADO DE NÓMINAS
      ===========================================
      Estas acciones aparecen en el menú "Acción" cuando se seleccionan una o más nóminas desde la vista de listado.-->
    
    <!--Acción 1: Generar Documentos (solo PDF y Documents) Sin envío de correo -->
    <record id="action_generate_payslip_documents" model="ir.actions.server">
        <field name="name">📄 Generar Documentos (PDF + Documents)</field>
        <field name="model_id" ref="hr_payroll.model_hr_payslip"/>
        <field name="binding_model_id" ref="hr_payroll.model_hr_payslip"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code"><![CDATA[
if records:
    records.action_generate_document_manual()
        ]]></field>
    </record>
    
    <!--Acción 2: Enviar correos (solo envío) Requiere que el documento ya exista-->
    <record id="action_send_payslip_mails" model="ir.actions.server">
        <field name="name">📧 Enviar Recibos por Correo</field>
        <field name="model_id" ref="hr_payroll.model_hr_payslip"/>
        <field name="binding_model_id" ref="hr_payroll.model_hr_payslip"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code"><![CDATA[
if records:
    records.action_send_email_manual()
        ]]></field>
    </record>
    
    <!--Acción 3: Generar y Enviar (completa) Hace todo el proceso: genera documento + envía correo-->
    <record id="action_generate_and_send_payslip" model="ir.actions.server">
        <field name="name">🚀 Generar Documento y Enviar Correo</field>
        <field name="model_id" ref="hr_payroll.model_hr_payslip"/>
        <field name="binding_model_id" ref="hr_payroll.model_hr_payslip"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code"><![CDATA[
if records:
    records.action_generate_document_and_send_email()
        ]]></field>
    </record>
</odoo>
